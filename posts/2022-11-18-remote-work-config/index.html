<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="corey">
<meta name="dcterms.date" content="2022-11-18">

<title>How I work remotely – Corey</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-3e8fa383bad517095c2b42029d2b9125.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-413871dfc58c102cfedefd6c0ab8462f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Corey</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/runkelcorey"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/platopasta"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">How I work remotely</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">tech</div>
                <div class="quarto-category">remote work</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>corey </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 18, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>When I landed my job at Kin + Carta, I invested in some creature comforts for remote work. At Yale, I kept hoping the office was a few elusive weeks away, and that it wasn’t worth investing in gear that I would soon not need. That was silly at the time, but ridiculuous once I took a remote job. I began searching for a configuration that would: - save my neck the strain of looking down at a 13-inch laptop - save my back the pain of sitting in a $40 Ikea chair 8 hours a day - travel well - bring some aesthetic joy to my day - work for play as well as work</p>
<p>I researched the r/onebag sub-reddit, a community of folks who engineer packing solutions for work trips, vacation, and everyday that fits in a single bag. I also looked to r/DigitalNomads, a group of folks with no fixed address, who work and travel simultaneously (or at least want to). From these forums, I settled on: - a laptop - collapsible laptop stand - second, thin monitor - monitor stand - mouse - keyboard</p>
<p>This set-up, hacked together by u/username, would allow me the same comfort traveling as it would living in one place. I would also be able to stash it to firmly separate work from home.</p>
<p>But, as my start date drew nearer, and my move to Cambridge more final, I realized that I wouldn’t be traveling as much as I originally hoped. Much of this digital nomad stuff was pure fantasy for me, triggered by a realization that another move meant losing the ties to place that had taken more than a year to fasten in New Haven. Once I abandoned that constraint, I recognized some advantages to a fixed configuration, and looked for a big monitor as well as a standing desk.</p>
<section id="monitors" class="level2">
<h2 class="anchored" data-anchor-id="monitors">Monitor(s)</h2>
<p>With a fixed configuration, larger screens made more sense, and weight was no longer a concern. This also brought the price down significantly: for $100, I purchased two 1.5-inch thick, 24-inch diagonal monitors, HDMI cables, and a monitor stand. (Imagine doing that 10 years ago). This gave me a ton of screen real estate, but required extra dongles to work with my 6-year-old laptop. Frustratingly, those dongles took weeks to ship and were difficult to find for less than $90.</p>
<p>Ultimately, this set up was unwieldy. The dongles made choices between charging and peripherals difficult; the monitors were 5kg each, and I worried that they would crash onto my desk each night; ironically, this setup was also annoying for my neck since I had to crane to see the edges of the monitors.</p>
<p>I sold those monitors for a small profit on Facebook Marketplace and swapped them for a 32-inch 4k screen. This is what I use today, and it’s beautiful. The only annoying part is sharing my screen on calls; with so many pixels, other screens downsample the image to fit it in their windows. But it renders an amazing picture and connects to my work Macbooks and 6-year-old XPS.</p>
<p>One tip here is to search Facebook Marketplace for 4k monitors and keep an eye out for gamers who are ditching their set-ups for lower-latency displays. My 60hz display is more than plenty for the work I do, and it seems like many gamers purchase these displays thinking it will work for them before realizing they need a higher refresh rate. As a result, they undervalue them / not many office workers seem to think about 4k vs 2k vs 1080p, driving down the price. I find that 4k at 32 inches (139 dpi) looks little different from my 13-inch Macbook (226 dpi).</p>
</section>
<section id="desk" class="level2">
<h2 class="anchored" data-anchor-id="desk">Desk</h2>
<p>After 2 years of working at a too-high wood desk, I needed a change. My back was strained from sitting in one position for so many hours, my wrists hurt since my keyboard was too high up, and working at a fixed setup from home didn’t promise much better. I had started to look for standing desks in late 2021 but always found something wrong with the options. New desks that wouldn’t wobble if I handwrote notes and received good durability ratings were upwards of $400, and used desks were always ugly (black desktop or white with black/wood veneer legs). Moreover, there were a thousand ways to raise and lower these desks, and buying the wrong motor meant a desk that took 5 minutes to move or broke after 2 years.</p>
<p>I wanted a desk that was less than $250, sturdy at any position, raised and lowered quickly, and was nice to look at. None of the big brands—Fully, Varidesk, —fit this niche. I settled on the Humanscale Float after seeing it listed on Facebook for $300, a quarter of its retail price. This was a gamble because I only found 3 informative reivews online. It turns out that obscurity was a good thing, however, and the 3 reviews I found were correct: the Float is an excellent piece of hardware that feels made to last, and an excellent sit/stand desk.</p>
<p>Humanscale, a competitor to Herman Miller for office furniture, embodies a Johnny Ive/Apple minimalism and sells all its products in a mix of white and brushed aluminum. This contrasted with all the faux wood other firms offered and worked well with my grey walls, Macbook, and white monitor. For motion, the Float employs an elegant pneumatic system for raising and lowering. This means no motor to break, and it moves as quickly as you can push or pull it. The tension, which controls how easy it is to load and depends on the amount of weight sitting on the desk, was difficult to set initially but really just took some time to break in.</p>
<p>The desk came with a wire holder (essential, honestly), and a cutout for cords to snake through, but no other features. Why was it so cheap? It turns out that office liquidators got busy during the pandemic and a lot of corporate office parks sold off high-quality furniture like the Float; if you see it near you, definitely consider it.</p>
<p>Humanscale also makes adjustable monitor arms powered by the same pneumatic system as the Float. I found two Humanscale M2s for $40, also about a quarter of retail, from a fellow remote worker on Facebook Marketplace. These connect with VESA mounts and I was able to attach my 32-inch monitor easily. The M2’s max holding capacity is 10kgs, so adding one 5kg monitor was trivial. One of the new pieces I purchased was a $75 Humanscale laptop holder that attached by VESA connection to the arm. I toyed with other mounts, but all looked too flimsy and I worried my laptops would crash to the floor if I used those. (Also, the aesthetic.) These arms also include hidden compartments so wires can snake through, some really ingenious design that cleaned up my configuration significantly.</p>
</section>
<section id="keyboard" class="level2">
<h2 class="anchored" data-anchor-id="keyboard">Keyboard</h2>
<p>Of all the research I did for my configuration, finding the perfect keyboard was the most fun. Reddit has sub-reddits (and sub-sub-reddits) dedicated to mechanical keyboard, wireless mechanical keyboards, ergonomic keyboards, DIY board, and everything in between. I dipped my toes into this pool with the Royal Kludge G68, a beginner board outfitted with full features. For those uninitiated, I’ll explain the parameters of purchasing a keyboard:</p>
<p>It had switches—the bits of metal below the keycap that register movement as a character pressed—that felt and sounded substantial; when I typed, everyone knew. The RK G68 also offered Bluetooth and wireless connection via dongle; the Bluetooth on my XPS conked out long ago, and it was imperative that I could work wirelessly with my work and personal machines. Like many mechanical keyboards, its RGB backlit display offered a ton of fun, especially when the New England winters turned dark. All this was available for $60, about a quarter of upper mid range boards.</p>
<p>Unfortunatley, the G68 was quite thick and a little garish. I traveled with it twice, and was worried both times that its keys would rip right off when my bag shifted. This isn’t a durability issue—one of the perks of mechanical keyboards is that you can swap out parts when things break or you want to look under the hood—but it always stayed in my head. Its white and red exterior was fine but did not fit my Humanscale aesthetic.</p>
<p>Shortly after I purchased the G68, several new keyboards carrying low-profile switches hit the market. These offered thinner keyboards meant for travel, or even to sit atop laptops to replace the butterflies. I pre-ordered the NuPhy Air60 and waited 3 weeks for it to arrive from Shanghai. NuPhy represents a newer Chinese manufacturing posture that has learned state-of-the-art techniques from its contracts abroad but is proud to market itself as a product of Shenzhen.</p>
<p>This board is a work of art, clad in brushed aluminum and about half as thick as the G68. It offered the same features as the G68 but featured a more substantial sound, more <em>thock</em> than <em>clack</em>. Plus, the low-profile board meant that it was harder to mis-type a key while moving your fingers across the board, a common habit of new mechanical keyboard immigrants. All in all, it offers the feel of a really substantial slim wireless keyboard, with gorgeous added features.</p>
</section>
<section id="mouse" class="level2">
<h2 class="anchored" data-anchor-id="mouse">Mouse</h2>
<p>The world of computer mice is dominated by Logitech, and I did not veer from that course. Logitech offers something for every market niche, and I picked up the Triathlon M720 for $40 on Facebook Marketplace. The mouse is known for long battery life (the secondhand batteries in mine lasted for 6 months) and performance that matches expectations. It too is connected by both Bluetooth and a dongle. The best feature I’ve found is a side button that maps by default to the Windows and Mac window manager applications, allowing me to quickly flit between work. Maybe one day I’ll purchase one of the vertical mice offered by Microsoft or Logitech, but the Triathlon is a great starter.</p>
</section>
<section id="for-travel" class="level2">
<h2 class="anchored" data-anchor-id="for-travel">For Travel</h2>
<p>When I purchased the NuPhy, I was worried about stashing it in a bag and grating off keycaps. NuPhy sells folios for the Air60 aimed at travelers to add some extra comfort. It has a really modern feel and was well worth the $10 they charged at the time.</p>
<p>Additionally, I purchased a NexStand collapsible laptop stand. Traveling with a keyboard is useless if the laptop stays at desk level and I had learned from my 2 years working remotely at Yale that my neck was going to rebel if we went back to those days. This stand can fit in my waterbottle pocket and holds up to my 16-inch Macbook Pro easily. It’s height adjusts to several levels and elevates the screen to eye-level. I was hesitant to shell out $45, but 2 days with it made it worthwhile.</p>
<p>After all was said and done, I had a 32-inch 4k monitor, my laptop of the day, a keyboard, mouse, and a bunch of Humanscale components that all fit the same aesthetic. It’s been 4 months since I had all the parts together, and I feel more comfortable working longer hours than I worked at Yale.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>