<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="corey">
<meta name="dcterms.date" content="2019-08-27">

<title>Distortion in Vertigo (1958) – Corey</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-70d37b45c5086134dc26dbb10e888fc0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-29ae748a7db3d513bee5d843ea35727a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Corey</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/runkelcorey"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/platopasta"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Distortion in Vertigo (1958)</h1>
            <p class="subtitle lead">The cinematography that makes Hitchcock’s masterpiece unsettle</p>
                                <div class="quarto-categories">
                <div class="quarto-category">film</div>
                <div class="quarto-category">analysis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>corey </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 27, 2019</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><strong>Edit 10/20/2019: check <a href="https://popculturebento.com/the-all-american-gaze-distorted-perspective-in-alfred-hitchcocks-vertigo/">this article</a> out at <em>Pop Culture Bento</em>!</strong></p>
<p>Hitchcock’s cinematographic style changes with each script and year in which he immerses himself, unlike the storybook qualities of Wes Anderson or the placid <a href="https://www.goodreads.com/quotes/665415-drops-dripped-quiet-talk-went-on-horses-neighed-and-scuffled">Drops dripped</a> of Andrei Tarkovsky. <em>Vertigo</em>, at the <a href="https://www.bbc.com/news/entertainment-arts-19078948">dizzying heights</a> of Hitchcock’s mastery, leads us into John Ferguson’s (James Stewart) mind—distorted by the lethal, dozen-story fall of a partner trying to save Ferguson—by forcing us into cramped spaces and mocking our spatial judgment. I argue that in doing so, Hitchcock forces viewers to understand the disorientation and claustrophobia that Ferguson so clearly feels. In doing so, Hitchcock makes reasonable the otherwise unreasonable male gaze of Ferguson and, by association, the effects that gaze causes, though it’s unclear whether it serves to morally justify that gaze. So, in-movie, Hitchcock uses film technique to warp what would otherwise be a black-and-white judgment about Ferguson’s behavior towards Judy Barton (Kim Novak). Out-of-movie, I finally make the claim that this in-movie phenomenon critiques white American masculinity’s treatment of the Other.</p>
<p>Much of this analysis was impossible for me until I considered David Lynch’s <em>Mulholland Drive</em>—there were too many motifs in <em>Vertigo</em> to grab a hold of! Hitchcock employs a <a href="https://images.squarespace-cdn.com/content/v1/514a2911e4b0896b36342655/1482995944327-EWLBUKOGUEVV2J7984Q3/ke17ZwdGBToddI8pDm48kDJVOyiZxV_-dowl7sRu02MUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYwL8IeDg6_3B-BRuF4nNrNcQkVuAT7tdErd0wQFEGFSnM_12NgTIazSm1At4R8ulVAcqDD8dBOmEycJv1fx_vd3MyvpBiIzzydoM1I6fLa65Q/image-asset.png?format=2500w">contrasting color palette</a>, his signature(ly disturbing) perplexion with blonde women, and an unforgettable break in narrative. <em>Mulholland</em> offers those motifs amped up to surrealistic proportions, with color palettes at near antagonistic levels, the blondes shining ever more platinum, though its narrative break is difficult to pinpoint. Connecting <em>Mulholland Drive</em> and <em>Vertigo</em> makes the interpretation of Hitchcock’s film no easier, but facilitates a shift in mindset that rendered Vertigo much more interpretable.</p>
<p>I mean this: Lynch is enigmatic as hell, but he continues to give interviews. In these interviews, he surrenders much of his creativity to what he terms “dream-logic”, and it stands out immediately. Dream-logic connects two objects despite their inconsistencies according to logic-logic. Such an approach finds its Western roots entirely recent, coming primarily out of Sigmund Freud’s <em>Interpretation of Dreams</em>. Its epistemology is usually visual in [Lynch’s] movies, though connections via homonym or punnery are entirely within the bounds of Freudian analysis. While a novelty in 2001 <em>Mulholland Drive</em> premiered, 1958 saw psychoanalysis at its peak of influence. This rise crashed into Hitchcock’s prior work with film noir, convoluted plots that often involved damaged detectives and female subjects vulnerable physically and mentally.</p>
<p><em>Vertigo</em> synthesizes these two strands. Kim Novak’s characters—one before, one after the narrative break—vie for their freedom against their supposed history. In classic Hitchcock fashion, <em>Vertigo</em> can be summarized as a Wrong Man Film,<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> where the protagonist is mistaken for a doppelgänger implicated in deep, deep shit. Unclassically, <em>Vertigo</em>’s protagonist is no man; and its protagonist(s) is/are not its central character(s). Novak’s Judy Barton is modeled (mostly) against her will after a prior, dead San Francisco socialite, Madeleine Ester,<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> who herself models a [much more] prior, dead San Francisco socialite. The complicity of each in creating their respective <a href="https://en.wikipedia.org/wiki/Iron_cage">iron cloaks</a> of identity is uncertain, but beside the point—Ferguson’s male gaze visualizes these identities before they are realized.</p>
<p>Often enough, the male gaze is analyzed as a whole, apart from its sometimes very specific set of eyes. I get at Ferguson’s specific set through Hitchcock’s motifs and cinematography. Ferguson’s gaze is set very literally in the film’s opening. Hitchcock shakes up the presumably keen vision of a detective with his partner’s death. The fall and the height and the guilt confuse themselves in Ferguson’s head to deliver a crippling case of vertigo, rendering him unproductive and idle, unmoored from his former senses of intelligence. There is nothing objective against which Ferguson can mark the damage his trauma wrought, no other detectives to which he can compare.</p>
<p>Hitchock will signify this psychosis slowly at first, then all at once. This chronological pattern approximates the spiral imagery so fundamental to <em>Vertigo</em>. Saul Bass’ iconic movie poster design depicts Ferguson plunging into a line-drawn spiral. This third dimension is added, and reflects the way objects track in wide-diameter circles, speeding as the circles shrink and finally encloses the object.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> Concerned of the obsession his wife (Madeleine) exhibits for a suicidal ancestor, Ferguson’s friend sends him to play private detective. While Scottie takes logical steps to follow the wife’s story, his social isolation and physical trauma get the better of him. His steps culminate in a famous leap into the brisk San Francisco Bay, where, just before, Madeleine plunged, unconscious.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.ytimg.com/vi/ih-KeOf3xQQ/maxresdefault.jpg" class="img-fluid figure-img"></p>
<figcaption><em>Vertigo</em>’s massive field of view.</figcaption>
</figure>
</div>
<p>After the dive in, James Ferguson can never quite get himself on solid ground. The <a href="https://i1.wp.com/www.abelardomorell.net/wp-content/uploads/2016/03/2017_Flowers-For-Lisa-76-After-Hitchcock%E2%80%99s-Vertigo-2017-copy-1.jpg">spiral patterns</a> begin to crop up in paintings, department stores, cemeteries, etc.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://2.bp.blogspot.com/-I5ob7SqVmUQ/T1rcELu28SI/AAAAAAAACaM/bt6R6pd-4a0/s1600/Hitchcock+Vertigo.jpg" class="img-fluid figure-img"></p>
<figcaption>The tight spiral of Madeleine, her ancestor, and eventually Judy connects the three in Ferguson’s dream-logic.</figcaption>
</figure>
</div>
<p>Caught in the inner circles of a deepening plot and deepening conspiracy, Hitchcock simulates what Ferguson’s deepening psychosis<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> must feel like with cinematographic trickery that encloses Ferguson’s figure, disclosing the craze lurking inside his obsessed mind. In <em>Vertigo</em>’s camerawork, deep focus and a 2-D plane forces our visual cortex to compare the near and far. The video below demonstrates this several times.</p>
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/bDwPJ5IaJ2g" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
<p>Those yellow flowers that Scottie walks behind at 1:59 appear taller than him in that moment, and the obscured view traps his figure in the history, mystery, and death that linger after Novak exits the scene. Hitchcock further unsettles viewers in :17, not with the normal technique of a dolly following Ferguson and suggesting danger, but with a shot from below. This camera setting exaggerates the height and length of objects outside focal point, making the 3ft flowers equal the 6ft Ferguson in height. The mastery here is the unresolved tension between these instances of camera trickery and Hitchcock’s concurrent attention to truly large objects. The enormity of the Golden Gate bridge in one famous shot anchors the nearly surreal imagery elsewhere in <em>Vertigo</em>, cementing a permanent unease.</p>
<p>Add this to the geologic folding that turns ordinary car following into labyrinthine mazes:</p>
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/fNyUpJGEnR4?start=73" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
<p>And of course, <em>Vertigo</em>’s signature camera effect, the zoom-in/dolly-out:</p>
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/O888bu0QrMg?start=56" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
<p>The spirals (2:13), the huge objects (:36), the zoom-in/dolly-out (1:20) culminate in <em>Vertigo</em>’s quasi-climax:</p>
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/GjPCk494e5Q" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
<p>The scene in Mission San Juan Bautista also bears striking resemblances to the work of Italian surrealist Giorgio de Chirico. De Chirico’s work produces a sense of unease through its emphasis on the uncanny, that which is not quite and yet almost is. I like to think of a composite image, the subimages of which are all perfectly possible, though the composite somehow not being possible. In the image below, which reminds me both of the Mission and the ever-out-of-reach Madeleine, the sky is a natural color for sunsets and the long shadows possible at twilight, but the building is so bright and the shadows so stark that the image could not possibly depict a real event. Hitchcock, toeing the sur/realism line, never leaves us with quite the uncanny images or impossible geometries to prove the sort of dream-logic that Lynch would make explicit, but these scenes add up. With snaking streets, out-of-proportion objects, and color palette, builds a profile of the uncanny without ever letting us put a finger on it. Like Ferguson, the viewer is hard-pressed to resolve the visual inputs Hitchcock offers.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/Gou4x1ymnaWvmfhCgIsalNJKlyZ04HiczUsV3K7mJbNanian5d0xowY3sDAaWLcOUIwbbkvajPRVBCH9Zy8eBx5g/640?wx_fmt=jpeg.png" class="img-fluid figure-img"></p>
<figcaption>Giorgio de Chirico’s Metaphysical Art movement</figcaption>
</figure>
</div>
<p>This kind of confusion invites resolution for the viewer into a reality-less vacuum. Similarly, while Ferguson is a detective, used to getting to the Bottom of Things, he can’t in this situation. All his preternatural detective powers have been duped by trauma and deceit. He is painfully aware which way is up and which down, but not much beyond that. Through all the twists and turns, Ferguson never understands (or rather, never is able to convince himself he understands) Madeleine. The history (of Madeleine, of Dolores, etc.) regresses too far for his eyes to penetrate. Unable to free himself from this convoluted plot and detached from reality, Ferguson imposes a narrative on Judy. He can’t figure out the mystery, so he might as well write his own answer. And the viewer accepts this to some degree because the story is resolution-deficient. Trapped staring through Ferguson’s gaze, escape is—depending on the specific viewer—to some extent preferable, even when it carries such gross implications.</p>
<p>The endgame of Ferguson’s gaze is sex. The male gaze conjures scenarios—no matter how fantastical—where legally-consensual<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> sex occurs, and relates those scenarios with the real world in order to judge their plausibility, filtering those implausible scenarios from the gazer’s strategies. A plausible scenario would mean that Ferguson has successfully dissected her, inducting her motives, and—with them in hand—<sub>smooth-talked</sub> her into thinking that his motives overlap with hers. But since Ferguson cannot understand Judy, because he cannot relate fantasy with reality, he resorts to the truly outrageous step of <em>realizing</em> those fantastical scenarios and their absurd bargaining power disparities, molding Judy so that her [perceived] motives can be <em>induced</em> to comport with Ferguson’s desires. This decision fabricates the conscience-satisfying, superficially-consensual sex that ends <em>Vertigo</em>. Horrifically, the viewers’ interests are sympathetic to Ferguson’s, begging for plot resolution, but are then [hopefully] spoiled when they are confronted with the idea that their interests imply the exploitation of Judy. From beneath the comfort of 1950’s American entertainment, a violent man watches.</p>
<p>In interpreting the greater significance of <em>Vertigo</em>, I benefit again from viewing Hitchcock through Lynch’s rear window:</p>
<blockquote class="blockquote">
<p>My childhood was elegant homes, tree-lined streets, the milkman, building backyard forts, droning airplanes, blue skies, picket fences, green grass, cherry trees. Middle America as it’s supposed to be. But on the cherry tree there’s this pitch oozing out – some black, some yellow, and millions of red ants crawling all over it. I discovered that if one looks a little closer at this beautiful world, there are <em>always</em> red ants underneath.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
</blockquote>
<p>Hitchcock views America somewhat from the outside. He picks a very particular part of the US, one where the histories of people who were not British is readily apparent in depictions of frontier life (and Native death). This choice primarily works to operate on the level of uncanny history, a history that few are equipped to read completely into their own history of America, but with pieces that all can recognize. It’s therefore both easy to dissociate Ferguson’s particular position from their own, while difficult to completely disentangle the silver screen from real life. Stewart’s roles prior to <em>Vertigo</em> included US everyman turned Congressman in <em>Mr.&nbsp;Smith Goes to Washington</em>, aviator Charles Lindbergh in <em>The Spirit of St.&nbsp;Louis</em>, a cowboy in <em>Winchester ’73</em>, George Bailey in <em>It’s a Wonderful Life</em>. I cannot think of another actor who so embodied rich, moral American-ness during this time. Hitchcock then takes apart this rich, moral, American figure by finding within him obsession, formidable sexuality, and desperation. A bit of psychological trauma sets off (or reveals?) the ants in this cherry tree. <strong>More specifically, the bent of America is towards taking that which/who is not ours and assimilating them, without dealing with “underlying” issues.</strong></p>
<p>I find it difficult to read Hitchcock as directing in so critical a fashion as I have just suggested, given the patent fetishism of Kim Novak’s characters. In that vein, I would echo the interpretation of American men above, but stop short of believing Hitchcock to be fully critical. For him, I don’t think the discomfort of Judy’s situation outweighs his fetish for Novak. While <em>Vertigo</em> is a unique instance of 1950’s filmmaking for its unsettling features and early integration of psychoanalysis, I’m not convinced of any allegations of intent on Hitchcock’s part. It very well may be that old Alfred was the astute critic I have made him to be, but it could equally (in my eyes) be the case that he was utterly obsessed with Novak. To resolve <em>Vertigo</em>’s interpretation would be to impose, for all but the most ardent individualist, an idea of its meaning absent context of its author. While I generally distance myself from arguments about authorial intent, I do not want to foreclose the possibility of its import to other viewers.</p>




<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>cf.&nbsp;<em>The Wrong Man</em> (1956)<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Novak in ~Act 1~.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Cf. This comical <a href="https://www.spiralwishingwells.com/images/all-wells-and-vortx-steve-1000.jpg">image</a> of a charity coin spinner, or how a <a href="https://images.fineartamerica.com/images/artworkimages/mediumlarge/2/gravity-well-spencer-sutton.jpg">gravity well</a> may alter planetary orbits.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Note that this means thoughts become detached from external reality. When we understand that no person can diagnose another from anywhere but their own viewpoint firmly in the mainstream of productive society, it becomes clear that the usage of the word ‘reality’ is misleading. Reality does not exist—it is judged to exist—but always with psychology this judgment originates from the highly-educated professional class. Understanding what ‘external reality’ entails means Ferguson could both be “detached from external reality” and quite rational in both his and the viewers’ eyes. Hitchcock plays on this truth in many films. Just because you’re paranoid doesn’t mean somebody isn’t out to get you.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Otherwise, one would have no need for fantasizing.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Lynch, David and Rodley, Chris (2005). Lynch on Lynch (revised edition). New York: Faber and Faber. ISBN 978-0-571-22018-2.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>